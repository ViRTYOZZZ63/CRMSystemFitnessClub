<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PulsePoint CRM — JSX Edition</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <div id="root"></div>

    <script>
      window.addEventListener('error', function (event) {
        const root = document.getElementById('root');
        if (!root || root.children.length) return;
        root.innerHTML = `
          <section style="max-width:720px;margin:40px auto;padding:24px;border-radius:16px;background:#141a2e;color:#fff;font-family:Inter,Arial,sans-serif;line-height:1.5">
            <h2 style="margin-top:0">Не удалось загрузить интерфейс CRM</h2>
            <p>Сервер работает, но браузер не смог загрузить JS-библиотеки для React.</p>
            <p><b>Проверьте доступ к CDN:</b> unpkg.com и cdn.jsdelivr.net</p>
            <p style="opacity:.8">Техническая ошибка: ${event.message || 'неизвестно'}</p>
          </section>
        `;
      });
    </script>

    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/react@18/umd/react.development.js'"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.development.js'"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js" onerror="this.onerror=null;this.src='https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js'"></script>
    <script type="text/babel" src="app.jsx"></script>

    <script>
      setTimeout(function () {
        const root = document.getElementById('root');
        if (!root || root.children.length) return;
        if (!window.React || !window.ReactDOM || !window.Babel) {
          root.innerHTML = `
            <section style="max-width:720px;margin:40px auto;padding:24px;border-radius:16px;background:#141a2e;color:#fff;font-family:Inter,Arial,sans-serif;line-height:1.5">
              <h2 style="margin-top:0">Страница не загрузилась полностью</h2>
              <p>Порт отвечает, но не удалось подтянуть библиотеки React/Babel из интернета.</p>
              <p><b>Что сделать:</b> разрешить доступ к unpkg.com и cdn.jsdelivr.net или открыть через сеть без блокировок.</p>
            </section>
          `;
        }
      }, 1800);
    </script>
  </body>
</html>
